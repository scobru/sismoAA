{
  "address": "0x97653E925B52d0455f5809cbc74104F594201EDC",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_verifierContract",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "allVaultIds",
      "outputs": [
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes",
          "name": "sismoConnectResponse",
          "type": "bytes"
        },
        {
          "internalType": "bytes16",
          "name": "appId",
          "type": "bytes16"
        },
        {
          "internalType": "bytes32",
          "name": "onetimePass",
          "type": "bytes32"
        }
      ],
      "name": "createPassKey",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes",
          "name": "sismoConnectResponse",
          "type": "bytes"
        },
        {
          "internalType": "bytes16",
          "name": "appId",
          "type": "bytes16"
        },
        {
          "internalType": "bytes32",
          "name": "onetimePass",
          "type": "bytes32"
        }
      ],
      "name": "getPassKey",
      "outputs": [
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "encryptedVaultId",
          "type": "bytes32"
        },
        {
          "internalType": "bytes16",
          "name": "appId",
          "type": "bytes16"
        }
      ],
      "name": "getWalletInfo",
      "outputs": [
        {
          "internalType": "bytes",
          "name": "",
          "type": "bytes"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "encryptedVaultId",
          "type": "bytes32"
        },
        {
          "internalType": "bytes16",
          "name": "appId",
          "type": "bytes16"
        },
        {
          "internalType": "bytes",
          "name": "walletInfo",
          "type": "bytes"
        }
      ],
      "name": "setWalletInfo",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "verifierContract",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    }
  ],
  "transactionHash": "0xe5b010463796d680a40e63f399a512b3feb9cab6b9b318643d906e314b0d711f",
  "receipt": {
    "to": null,
    "from": "0x8aA5F726d9F868a21a8bd748E2f1E43bA31eb670",
    "contractAddress": "0x97653E925B52d0455f5809cbc74104F594201EDC",
    "transactionIndex": 2,
    "gasUsed": "551997",
    "logsBloom": "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "blockHash": "0x113a96262e725c501ed1216fa769fabb46ca59c692ba60022e9affd5a496ba89",
    "transactionHash": "0xe5b010463796d680a40e63f399a512b3feb9cab6b9b318643d906e314b0d711f",
    "logs": [],
    "blockNumber": 10913219,
    "cumulativeGasUsed": "767861",
    "status": 1,
    "byzantium": true
  },
  "args": [
    "0x424d8d41fc1fd1FC6Fe420887027F733c8fCc26a"
  ],
  "numDeployments": 4,
  "solcInputHash": "c8ac5a026aa51e8c91bc99b3140fc7c6",
  "metadata": "{\"compiler\":{\"version\":\"0.8.19+commit.7dd6d404\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_verifierContract\",\"type\":\"address\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"allVaultIds\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes\",\"name\":\"sismoConnectResponse\",\"type\":\"bytes\"},{\"internalType\":\"bytes16\",\"name\":\"appId\",\"type\":\"bytes16\"},{\"internalType\":\"bytes32\",\"name\":\"onetimePass\",\"type\":\"bytes32\"}],\"name\":\"createPassKey\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes\",\"name\":\"sismoConnectResponse\",\"type\":\"bytes\"},{\"internalType\":\"bytes16\",\"name\":\"appId\",\"type\":\"bytes16\"},{\"internalType\":\"bytes32\",\"name\":\"onetimePass\",\"type\":\"bytes32\"}],\"name\":\"getPassKey\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"encryptedVaultId\",\"type\":\"bytes32\"},{\"internalType\":\"bytes16\",\"name\":\"appId\",\"type\":\"bytes16\"}],\"name\":\"getWalletInfo\",\"outputs\":[{\"internalType\":\"bytes\",\"name\":\"\",\"type\":\"bytes\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"encryptedVaultId\",\"type\":\"bytes32\"},{\"internalType\":\"bytes16\",\"name\":\"appId\",\"type\":\"bytes16\"},{\"internalType\":\"bytes\",\"name\":\"walletInfo\",\"type\":\"bytes\"}],\"name\":\"setWalletInfo\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"verifierContract\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"}],\"devdoc\":{\"kind\":\"dev\",\"methods\":{},\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/SismoPKP.sol\":\"SismoPKP\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\",\"useLiteralContent\":true},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[],\"viaIR\":true},\"sources\":{\"contracts/SismoPKP.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\r\\npragma solidity ^0.8.0;\\r\\n\\r\\ninterface ISismoVerifier {\\r\\n    function sismoVerify(\\r\\n        bytes memory sismoConnectResponse,\\r\\n        bytes16 appId,\\r\\n        bytes32 hash\\r\\n    ) external view returns (bytes memory, bytes memory);\\r\\n}\\r\\n\\r\\ncontract SismoPKP {\\r\\n    mapping(bytes16 => mapping(bytes32 => bytes)) private vaults;\\r\\n    mapping(bytes16 => mapping(bytes32 => bytes32)) private passKey;\\r\\n\\r\\n    bytes32[] public allVaultIds; // New array to keep track of all vault IDs\\r\\n\\r\\n    address public verifierContract;\\r\\n\\r\\n    constructor(address _verifierContract) {\\r\\n        verifierContract = _verifierContract;\\r\\n    }\\r\\n\\r\\n    function createPassKey(\\r\\n        bytes memory sismoConnectResponse,\\r\\n        bytes16 appId,\\r\\n        bytes32 onetimePass // pass in the signature\\r\\n    ) external {\\r\\n        (bytes memory vaultId, bytes memory signedMessage) = _verify(\\r\\n            sismoConnectResponse,\\r\\n            appId,\\r\\n            onetimePass\\r\\n        );\\r\\n\\r\\n        // random number 1 to 100\\r\\n        uint256 rand = uint256(\\r\\n            keccak256(abi.encodePacked(block.timestamp, block.prevrandao))\\r\\n        ) % 100000;\\r\\n\\r\\n        // create random 32 hash for passkey\\r\\n        bytes32 key = keccak256(\\r\\n            abi.encodePacked(\\r\\n                block.timestamp,\\r\\n                block.prevrandao,\\r\\n                rand,\\r\\n                signedMessage,\\r\\n                vaultId\\r\\n            )\\r\\n        );\\r\\n\\r\\n        passKey[appId][keccak256(vaultId)] = key;\\r\\n    }\\r\\n\\r\\n    function getPassKey(\\r\\n        bytes memory sismoConnectResponse,\\r\\n        bytes16 appId,\\r\\n        bytes32 onetimePass\\r\\n    ) external view returns (bytes32) {\\r\\n        (bytes memory vaultId, ) = _verify(\\r\\n            sismoConnectResponse,\\r\\n            appId,\\r\\n            onetimePass\\r\\n        );\\r\\n\\r\\n        return passKey[appId][keccak256(vaultId)];\\r\\n    }\\r\\n\\r\\n    function setWalletInfo(\\r\\n        bytes32 encryptedVaultId,\\r\\n        bytes16 appId,\\r\\n        bytes memory walletInfo\\r\\n    ) external {\\r\\n        require(\\r\\n            vaults[appId][encryptedVaultId].length == 0,\\r\\n            \\\"Wallet info already exists\\\"\\r\\n        );\\r\\n        vaults[appId][encryptedVaultId] = walletInfo;\\r\\n\\r\\n        allVaultIds.push(encryptedVaultId); // Add to list of all vault IDs\\r\\n    }\\r\\n\\r\\n    function getWalletInfo(\\r\\n        bytes32 encryptedVaultId,\\r\\n        bytes16 appId\\r\\n    ) external view returns (bytes memory) {\\r\\n        return vaults[appId][encryptedVaultId];\\r\\n    }\\r\\n\\r\\n    function _verify(\\r\\n        bytes memory sismoConnectResponse,\\r\\n        bytes16 appId,\\r\\n        bytes32 onetimePass\\r\\n    ) internal view returns (bytes memory, bytes memory) {\\r\\n        (bytes memory vaultId, bytes memory signedMessage) = ISismoVerifier(\\r\\n            verifierContract\\r\\n        ).sismoVerify(sismoConnectResponse, appId, onetimePass);\\r\\n\\r\\n        bytes32 _onetimePass = abi.decode(signedMessage, (bytes32));\\r\\n\\r\\n        require(_onetimePass == onetimePass, \\\"WRONG_ONETIMEPASS\\\");\\r\\n\\r\\n        return (vaultId, signedMessage);\\r\\n    }\\r\\n}\\r\\n\",\"keccak256\":\"0x8be3b21b9f04eeb152fe172da147cc289f55540fbf8fb8b85fa49ae2be12f116\",\"license\":\"MIT\"}},\"version\":1}",
  "bytecode": "0x60803461007457601f61092338819003918201601f19168301916001600160401b038311848410176100795780849260209460405283398101031261007457516001600160a01b0381169081900361007457600380546001600160a01b03191691909117905560405161089390816100908239f35b600080fd5b634e487b7160e01b600052604160045260246000fdfe6040608081526004908136101561001557600080fd5b600091823560e01c8063018f6e4c146104e85780638001e56c146103f3578063877aa8841461030e578063b01b1e4f146102c5578063cf695688146102985763ecccde481461006357600080fd5b346102945760603660031901126102945780359161007f610570565b9067ffffffffffffffff90604435828111610290576100a19036908601610628565b926001600160801b0319169081875260209187835281882087895283526100ca828920546106b6565b61024d5787528682528087208688528252862092805192831161023a579082916100f485546106b6565b601f81116101ea575b5081601f841160011461018457508792610179575b50508160011b916000199060031b1c19161790555b6002549068010000000000000000821015610166575080600161014d9201600255610523565b819291549060031b91821b91600019901b191617905580f35b634e487b7160e01b845260419052602483fd5b015190503880610112565b8589528089209350601f1985169089905b8282106101d25750509084600195949392106101b9575b505050811b019055610127565b015160001960f88460031b161c191690553880806101ac565b80600186978294978701518155019601940190610195565b90919250848852828820601f850160051c810191848610610230575b90601f86959493920160051c01905b81811061022257506100fd565b898155859450600101610215565b9091508190610206565b634e487b7160e01b875260418552602487fd5b815162461bcd60e51b8152808701849052601a60248201527f57616c6c657420696e666f20616c7265616479206578697374730000000000006044820152606490fd5b8680fd5b8280fd5b5050346102c157816003193601126102c15760035490516001600160a01b039091168152602090f35b5080fd5b5050346102c157806020926102e56102dc3661066f565b90809392610735565b50906001600160801b031916825260018552828220908581519101208252845220549051908152f35b5090346102945761032b916103223661066f565b90809592610735565b839291925191602083014281524486850152858452606084019184831067ffffffffffffffff8411176103e057506080620186a06103b992848952865190200693818601944286524460a088015260c087015261039281518092602060e08a01910161058c565b850194865160208801966103aa8260e083018a61058c565b010360608101845201826105d4565b519020936001600160801b0319168552600160205282852091519020845260205282205580f35b634e487b7160e01b895260419052602488fd5b5090346102945780600319360112610294576001600160801b0319610416610570565b16835260209183835281842090358452825280832081519384918181549061043d826106b6565b928386526001928884821691826000146104be575050600114610480575b858861047c8961046d848a03856105d4565b519282849384528301906105af565b0390f35b87945081939291528383205b8284106104a6575050508201018161046d61047c3861045b565b8054848a01860152889550879490930192810161048c565b60ff19168882015294151560051b8701909401945085935061046d925061047c915038905061045b565b50346102945760203660031901126102945735916002548310156105205750610512602092610523565b91905490519160031b1c8152f35b80fd5b60025481101561055a5760026000527f405787fa12a823e0f2b7631cc41b3ba8828b3321ca811111fa75cd3aa3bb5ace0190600090565b634e487b7160e01b600052603260045260246000fd5b602435906001600160801b03198216820361058757565b600080fd5b60005b83811061059f5750506000910152565b818101518382015260200161058f565b906020916105c88151809281855285808601910161058c565b601f01601f1916010190565b90601f8019910116810190811067ffffffffffffffff8211176105f657604052565b634e487b7160e01b600052604160045260246000fd5b67ffffffffffffffff81116105f657601f01601f191660200190565b81601f820112156105875780359061063f8261060c565b9261064d60405194856105d4565b8284526020838301011161058757816000926020809301838601378301015290565b6060600319820112610587576004359067ffffffffffffffff82116105875761069a91600401610628565b906024356001600160801b031981168103610587579060443590565b90600182811c921680156106e6575b60208310146106d057565b634e487b7160e01b600052602260045260246000fd5b91607f16916106c5565b81601f820112156105875780516107068161060c565b9261071460405194856105d4565b8184526020828401011161058757610732916020808501910161058c565b90565b92916107699160018060a01b036003541694604051958694859262fc55f960e41b84526060600485015260648401906105af565b926001600160801b031916602483015283604483015281600097889403915afa93841561085157809281956107ef575b5060208580518101031261052057506020840151036107b6579190565b60405162461bcd60e51b815260206004820152601160248201527057524f4e475f4f4e4554494d455041535360781b6044820152606490fd5b925093503d8085843e61080281846105d4565b82019160408184031261084d5780519267ffffffffffffffff93848111610290578161082f9184016106f0565b9360208301519081116102905761084692016106f0565b9338610799565b8480fd5b604051903d90823e3d90fdfea2646970667358221220d1828fafa2b440f1dbd6b4e3f51803c289271a82f676cafe105753ec32fea6c964736f6c63430008130033",
  "deployedBytecode": "0x6040608081526004908136101561001557600080fd5b600091823560e01c8063018f6e4c146104e85780638001e56c146103f3578063877aa8841461030e578063b01b1e4f146102c5578063cf695688146102985763ecccde481461006357600080fd5b346102945760603660031901126102945780359161007f610570565b9067ffffffffffffffff90604435828111610290576100a19036908601610628565b926001600160801b0319169081875260209187835281882087895283526100ca828920546106b6565b61024d5787528682528087208688528252862092805192831161023a579082916100f485546106b6565b601f81116101ea575b5081601f841160011461018457508792610179575b50508160011b916000199060031b1c19161790555b6002549068010000000000000000821015610166575080600161014d9201600255610523565b819291549060031b91821b91600019901b191617905580f35b634e487b7160e01b845260419052602483fd5b015190503880610112565b8589528089209350601f1985169089905b8282106101d25750509084600195949392106101b9575b505050811b019055610127565b015160001960f88460031b161c191690553880806101ac565b80600186978294978701518155019601940190610195565b90919250848852828820601f850160051c810191848610610230575b90601f86959493920160051c01905b81811061022257506100fd565b898155859450600101610215565b9091508190610206565b634e487b7160e01b875260418552602487fd5b815162461bcd60e51b8152808701849052601a60248201527f57616c6c657420696e666f20616c7265616479206578697374730000000000006044820152606490fd5b8680fd5b8280fd5b5050346102c157816003193601126102c15760035490516001600160a01b039091168152602090f35b5080fd5b5050346102c157806020926102e56102dc3661066f565b90809392610735565b50906001600160801b031916825260018552828220908581519101208252845220549051908152f35b5090346102945761032b916103223661066f565b90809592610735565b839291925191602083014281524486850152858452606084019184831067ffffffffffffffff8411176103e057506080620186a06103b992848952865190200693818601944286524460a088015260c087015261039281518092602060e08a01910161058c565b850194865160208801966103aa8260e083018a61058c565b010360608101845201826105d4565b519020936001600160801b0319168552600160205282852091519020845260205282205580f35b634e487b7160e01b895260419052602488fd5b5090346102945780600319360112610294576001600160801b0319610416610570565b16835260209183835281842090358452825280832081519384918181549061043d826106b6565b928386526001928884821691826000146104be575050600114610480575b858861047c8961046d848a03856105d4565b519282849384528301906105af565b0390f35b87945081939291528383205b8284106104a6575050508201018161046d61047c3861045b565b8054848a01860152889550879490930192810161048c565b60ff19168882015294151560051b8701909401945085935061046d925061047c915038905061045b565b50346102945760203660031901126102945735916002548310156105205750610512602092610523565b91905490519160031b1c8152f35b80fd5b60025481101561055a5760026000527f405787fa12a823e0f2b7631cc41b3ba8828b3321ca811111fa75cd3aa3bb5ace0190600090565b634e487b7160e01b600052603260045260246000fd5b602435906001600160801b03198216820361058757565b600080fd5b60005b83811061059f5750506000910152565b818101518382015260200161058f565b906020916105c88151809281855285808601910161058c565b601f01601f1916010190565b90601f8019910116810190811067ffffffffffffffff8211176105f657604052565b634e487b7160e01b600052604160045260246000fd5b67ffffffffffffffff81116105f657601f01601f191660200190565b81601f820112156105875780359061063f8261060c565b9261064d60405194856105d4565b8284526020838301011161058757816000926020809301838601378301015290565b6060600319820112610587576004359067ffffffffffffffff82116105875761069a91600401610628565b906024356001600160801b031981168103610587579060443590565b90600182811c921680156106e6575b60208310146106d057565b634e487b7160e01b600052602260045260246000fd5b91607f16916106c5565b81601f820112156105875780516107068161060c565b9261071460405194856105d4565b8184526020828401011161058757610732916020808501910161058c565b90565b92916107699160018060a01b036003541694604051958694859262fc55f960e41b84526060600485015260648401906105af565b926001600160801b031916602483015283604483015281600097889403915afa93841561085157809281956107ef575b5060208580518101031261052057506020840151036107b6579190565b60405162461bcd60e51b815260206004820152601160248201527057524f4e475f4f4e4554494d455041535360781b6044820152606490fd5b925093503d8085843e61080281846105d4565b82019160408184031261084d5780519267ffffffffffffffff93848111610290578161082f9184016106f0565b9360208301519081116102905761084692016106f0565b9338610799565b8480fd5b604051903d90823e3d90fdfea2646970667358221220d1828fafa2b440f1dbd6b4e3f51803c289271a82f676cafe105753ec32fea6c964736f6c63430008130033",
  "devdoc": {
    "kind": "dev",
    "methods": {},
    "version": 1
  },
  "userdoc": {
    "kind": "user",
    "methods": {},
    "version": 1
  },
  "storageLayout": {
    "storage": [
      {
        "astId": 21,
        "contract": "contracts/SismoPKP.sol:SismoPKP",
        "label": "vaults",
        "offset": 0,
        "slot": "0",
        "type": "t_mapping(t_bytes16,t_mapping(t_bytes32,t_bytes_storage))"
      },
      {
        "astId": 27,
        "contract": "contracts/SismoPKP.sol:SismoPKP",
        "label": "passKey",
        "offset": 0,
        "slot": "1",
        "type": "t_mapping(t_bytes16,t_mapping(t_bytes32,t_bytes32))"
      },
      {
        "astId": 30,
        "contract": "contracts/SismoPKP.sol:SismoPKP",
        "label": "allVaultIds",
        "offset": 0,
        "slot": "2",
        "type": "t_array(t_bytes32)dyn_storage"
      },
      {
        "astId": 32,
        "contract": "contracts/SismoPKP.sol:SismoPKP",
        "label": "verifierContract",
        "offset": 0,
        "slot": "3",
        "type": "t_address"
      }
    ],
    "types": {
      "t_address": {
        "encoding": "inplace",
        "label": "address",
        "numberOfBytes": "20"
      },
      "t_array(t_bytes32)dyn_storage": {
        "base": "t_bytes32",
        "encoding": "dynamic_array",
        "label": "bytes32[]",
        "numberOfBytes": "32"
      },
      "t_bytes16": {
        "encoding": "inplace",
        "label": "bytes16",
        "numberOfBytes": "16"
      },
      "t_bytes32": {
        "encoding": "inplace",
        "label": "bytes32",
        "numberOfBytes": "32"
      },
      "t_bytes_storage": {
        "encoding": "bytes",
        "label": "bytes",
        "numberOfBytes": "32"
      },
      "t_mapping(t_bytes16,t_mapping(t_bytes32,t_bytes32))": {
        "encoding": "mapping",
        "key": "t_bytes16",
        "label": "mapping(bytes16 => mapping(bytes32 => bytes32))",
        "numberOfBytes": "32",
        "value": "t_mapping(t_bytes32,t_bytes32)"
      },
      "t_mapping(t_bytes16,t_mapping(t_bytes32,t_bytes_storage))": {
        "encoding": "mapping",
        "key": "t_bytes16",
        "label": "mapping(bytes16 => mapping(bytes32 => bytes))",
        "numberOfBytes": "32",
        "value": "t_mapping(t_bytes32,t_bytes_storage)"
      },
      "t_mapping(t_bytes32,t_bytes32)": {
        "encoding": "mapping",
        "key": "t_bytes32",
        "label": "mapping(bytes32 => bytes32)",
        "numberOfBytes": "32",
        "value": "t_bytes32"
      },
      "t_mapping(t_bytes32,t_bytes_storage)": {
        "encoding": "mapping",
        "key": "t_bytes32",
        "label": "mapping(bytes32 => bytes)",
        "numberOfBytes": "32",
        "value": "t_bytes_storage"
      }
    }
  }
}